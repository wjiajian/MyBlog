# 🌍 把博客部署到 Ubuntu 服务器 (新手保姆级教程)

你好！这篇文档专门为你准备。我们采用最简单、最不容易出错的方法：
**在本地电脑打包好，直接把生成的文件传到服务器上。**

不需要在服务器上装 Node.js，也不需要在服务器上编译代码。你的服务器只需要做一个动作：**展示网页**。

---

## 🛠️ 第一阶段：在本地电脑准备文件

### 1. 修改配置 (关键！)
如果你是部署到自己的域名（比如 `www.example.com`）或者服务器 IP 的根路径，你需要确保 `vite.config.ts` 是默认配置。

打开 `vite.config.ts`，检查 `base` 这一行：
*   **如果是部署到服务器根目录** (绝大多数情况)：**删除** `base: '...'` 这一行，或者改成 `base: '/'`。
*   *(注意：之前为了 GitHub Pages 我们可能改成了 `/jiajian-blog/`，现在如果要部署到独立服务器，记得改回来！)*

### 2. 生成最终网页
在你的 VS Code 终端里运行：

```bash
npm run build
```

等它跑完，你会发现左边文件夹里多了一个 **`dist`** 文件夹。
里面就是最终生成的 HTML、CSS 和 JS 文件。这还是你唯一需要传给服务器的东西。

---

## 🖥️ 第二阶段：配置 Ubuntu 服务器

你需要一个工具连接服务器。你可以用终端 (Terminal/CMD) 或者 PuTTY。

### 1. 登录服务器
```bash
ssh root@你的服务器IP
# 然后输入密码（输入密码时屏幕不会显示，输完回车即可）
```

### 2. 安装 Nginx (网页服务器软件)
把下面两行命令复制进去，一行一行运行：

```bash
sudo apt update
sudo apt install nginx -y
```
*(解释：`apt` 是 Ubuntu 的应用商店，我们更新一下列表，然后安装 Nginx)*

### 3. 验证安装
在浏览器地址栏输入你的 **服务器IP**。
如果你看到 "Welcome to nginx!" 的页面，说明服务器已经活了！🎉

---

## 📤 第三阶段：把文件上传到服务器

这一步我们不仅可以用命令，更推荐用可视化工具，比如 **FileZilla** 或 **WinSCP** (Windows)。
假设你没有这些工具，我们用最简单的 `scp` 命令 (在你的**本地电脑**终端运行，不是在服务器里)：

```bash
# 格式：scp -r [本地dist文件夹路径] [用户名]@[服务器IP]:[服务器上的目标路径]

# 举例 (请把下面的路径和IP换成你自己的)：
scp -r dist/* root@123.45.67.89:/var/www/html/
```

*   **`dist/*`**: 表示上传 dist 文件夹里的**所有内容**。
*   **`/var/www/html/`**: 这是 Nginx 默认存放网页的地方。我们将文件直接放进去。

> **提示**: 如果命令提示权限不足或路径错误，你也可以先传到 `/root/`，然后在服务器里用 `mv` 命令移动过去。

---

## ⚙️ 第四阶段：解决 "刷新变 404" 问题 (高级但必要)

因为我们的博客是 "单页应用 (SPA)"，默认的 Nginx 设置会在你刷新内页（比如刷新 `/posts/react-journey`）时报 404 错误。我们需要改一个小设置。

### 1. 回到服务器终端
### 2. 编辑配置文件
我们需要用 `nano` (一个服务器上的简易记事本) 来编辑配置。

```bash
nano /etc/nginx/sites-available/default
```

### 3. 修改内容
你会看到很多字。按键盘方向键往下找，找到 `location / { ... }` 这一块。
把它修改成下面这样 (重点是添加 `try_files` 那一行)：

```nginx
server {
    # ... 其他上面原本的内容不要动 ...

    root /var/www/html; # 确保这里指向你上传文件的位置
    index index.html index.htm;

    server_name _;

    location / {
        # 修改这一行！!
        # 意思是：先找有没有这个文件，如果没有，统统把球踢给 index.html
        try_files $uri $uri/ /index.html;
    }

    # ... 下面的内容也不要动 ...
}
```

### 4. 保存退出
1.  按 `Ctrl + O` (保存) -> 回车。
2.  按 `Ctrl + X` (退出)。

### 5. 重启 Nginx
让修改生效：

```bash
sudo systemctl restart nginx
```

---

## 🎉 完成！

现在打开浏览器，访问你的 **服务器IP**。你的博客应该已经完美运行了！

**常用的 Ubuntu 命令 (备忘录):**
*   `ls`: 列出当前文件夹有什么文件。
*   `cd [文件夹名]`: 进入文件夹。
*   `rm -rf [文件名]`: 强制删除文件 (慎用！)。
*   `mv [原位置] [新位置]`: 移动文件。
